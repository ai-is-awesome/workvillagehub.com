datasource db {
    provider = "postgresql"
    url      = env("PRISMA_DB_URL")
}

generator client {
    provider = "prisma-client-js"
    output   = "./generated/prisma-client-js"
}

model Job {
    id                            Int               @id @default(autoincrement())
    jobTitle                      String
    logoUrl                       String
    jobLink                       String
    companyName                   String
    jobDescription                String
    jobPostDate                   DateTime
    jobAddedDate                  DateTime
    numberOfDetailedClicks        Int
    numberOfTimesJobLinkIsClicked Int
    technologies                  JobTechnologies[]
    applications                  Application[]
}

model User {
    id                     Int             @id @default(autoincrement())
    firstName              String
    lastName               String
    emailAddress           String
    isEmailVerified        Boolean
    userStatisticsId       Int?
    userStatistics         UserStatistics? @relation(fields: [userStatisticsId], references: [id])
    technologyId           Int?
    technologyPreferences  Technology?     @relation(fields: [technologyId], references: [id])
    professionalExperience Experience?
    applications           Application[]
    Role                   Role            @relation(fields: [roleId], references: [id])
    roleId                 Int
}

model Role {
    id       Int    @id @default(autoincrement())
    roleName String
    User     User[]
}

model UserStatistics {
    id     Int    @id @default(autoincrement())
    userId Int
    jobId  Int?
    User   User[]
}

model Application {
    userId Int
    jobId  Int
    user   User @relation(fields: [userId], references: [id])
    job    Job  @relation(fields: [jobId], references: [id])

    @@id([userId, jobId])
}

model Experience {
    id             Int  @id @default(autoincrement())
    userId         User @relation(fields: [id], references: [id])
    numberOfYears  Int
    numberOfMonths Int
}

model Technology {
    id              Int               @id @default(autoincrement())
    name            String
    type            String? // Optional field for technology type
    jobTechnologies JobTechnologies[]
    User            User[]
}

model JobTechnologies {
    jobId        Int
    technologyId Int
    Job          Job        @relation(fields: [jobId], references: [id])
    technology   Technology @relation(fields: [technologyId], references: [id])

    // Primary key constraint
    @@id([jobId, technologyId])
}
